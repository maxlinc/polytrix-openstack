swagger: 2
info:
  title: Cloud Databases
  version: unknown
consumes:
- application/json
produces:
- application/json
paths:
  /mgmt/hosts:
    get:
      operationId: gethosts
      summary: List All Compute Hosts
      description: "\n        Lists all of the compute hosts.\n      "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: "{\n    \"hosts\": [\n        {\n            \"instanceCount\"\
              : 0, \n            \"name\": \"hostname_2\"\n        }, \n        {\n\
              \            \"instanceCount\": 2, \n            \"name\": \"hostname_1\"\
              \n        }\n    ]\n}\n"
  /mgmt/hosts/{hostId}:
    get:
      operationId: gethostbyid
      summary: List All Instances for a Host
      description: "\n        Lists all of the instances for the specified host.\n\
        \      "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: "{\n    \"host\": {\n        \"instances\": [\n    \
              \        {\n                \"id\": \"dcf2c32b-241d-4c39-af70-1001dfe946d6\"\
              , \n                \"name\": \"dcf2c32b-241d-4c39-af70-1001dfe946d6-lay\"\
              , \n                \"server_id\": \"dc0f43fd-f76f-4e4b-b676-4bf82539ecb9\"\
              , \n                \"status\": \"ACTIVE\", \n                \"tenant_id\"\
              : \"3000\"\n            }, \n            {\n                \"id\":\
              \ \"d4603f69-ec7e-4e9b-803f-600b9205576f\", \n                \"name\"\
              : \"d4603f69-ec7e-4e9b-803f-600b9205576f-lay\", \n                \"\
              server_id\": \"0a0bb560-362f-407a-90b6-3437f8b6e34f\", \n          \
              \      \"status\": \"ACTIVE\", \n                \"tenant_id\": \"3000\"\
              \n            }\n        ], \n        \"name\": \"hostname_1\", \n \
              \       \"percentUsed\": 204, \n        \"totalRAM\": 2004, \n     \
              \   \"usedRAM\": 4096\n    }\n}\n"
  /mgmt/hosts/{hostId}/instances/action:
    post:
      operationId: updateHostInstances
      summary: Update All Instances on Host
      description: Updates all instances on a specified host.
      produces:
      - application/json
      responses:
        202:
          description: |-
            202 response
          examples:
            application/json: |+
              HTTP/1.1 202 Accepted
              Content-Type: text/plain; charset=UTF-8
              Content-Length: 58
              Date: Tue, 07 Feb 2012 23:56:52 GMT


  /mgmt/usage:
    get:
      operationId: getusageall
      summary: List All Usage Records
      description: "\n        Lists all of the usage records.\n      "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: |+
              {
                 "usage": [
                    {
                       "dataCenter": "DEV1",
                       "dbaas:product": {
                          "memory": 512,
                          "resourceType": "MYSQL",
                          "serviceCode": "CloudDatabase",
                          "storage": 1,
                          "version": "1"
                       },
                       "endTime": "2013-01-07 16:00:00",
                       "environment": "LOCAL",
                       "id": "0f781f37-ef6d-4978-8dbc-f26d29a255a6",
                       "region": "LOCAL_DEV",
                       "resourceId": "ac019a26-acb5-4591-b337-9bbfa8e85727",
                       "resourceName": "test_instance",
                       "rootAction": "reddwarf.instance.exists",
                       "startTime": "2013-01-06 15:59:00",
                       "tenantId": "d91c1201-6136-4b1e-aa16-45380d8733b8",
                       "type": "USAGE",
                       "version": "1"
                    }
                 ]
              }

  /mgmt/usage/instance/{instanceId}:
    get:
      operationId: getusagebyinstance
      summary: List Instance Usage Records
      description: "\n        Lists the usage records for the specified instance.\n\
        \      "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: |+
              {
                 "usage": [
                    {
                       "dataCenter": "DEV1",
                       "dbaas:product": {
                          "memory": 512,
                          "resourceType": "MYSQL",
                          "serviceCode": "CloudDatabase",
                          "storage": 1,
                          "version": "1"
                       },
                       "endTime": "2013-01-07 16:00:00",
                       "environment": "LOCAL",
                       "id": "0f781f37-ef6d-4978-8dbc-f26d29a255a6",
                       "region": "LOCAL_DEV",
                       "resourceId": "ac019a26-acb5-4591-b337-9bbfa8e85727",
                       "resourceName": "test_instance",
                       "rootAction": "reddwarf.instance.exists",
                       "startTime": "2013-01-06 15:59:00",
                       "tenantId": "d91c1201-6136-4b1e-aa16-45380d8733b8",
                       "type": "USAGE",
                       "version": "1"
                    }
                 ]
              }

  /mgmt/usage/tenant/{tenantId}:
    get:
      operationId: getusagebytenant
      summary: List Account Usage Records
      description: "\n        Lists the usage records for the specified account.\n\
        \      "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: |
              {
                 "usage": [
                    {
                       "dataCenter": "DEV1",
                       "dbaas:product": {
                          "memory": 512,
                          "resourceType": "MYSQL",
                          "serviceCode": "CloudDatabase",
                          "storage": 1,
                          "version": "1"
                       },
                       "endTime": "2013-01-07 16:00:00",
                       "environment": "LOCAL",
                       "id": "0f781f37-ef6d-4978-8dbc-f26d29a255a6",
                       "region": "LOCAL_DEV",
                       "resourceId": "ac019a26-acb5-4591-b337-9bbfa8e85727",
                       "resourceName": "test_instance",
                       "rootAction": "reddwarf.instance.exists",
                       "startTime": "2013-01-06 15:59:00",
                       "tenantId": "d91c1201-6136-4b1e-aa16-45380d8733b8",
                       "type": "USAGE",
                       "version": "1"
                    }
                 ]
              }
  /mgmt/instances:
    get:
      operationId: getIndex
      summary: List Management Index of Instances
      description: "\n        Lists all of the database instances, optionally filtered\
        \ by deleted status.\n      "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: "{\n    \"instances\": [\n        {\n            \"\
              created\": \"2014-02-13T21:47:13\", \n            \"datastore\": {\n\
              \                \"type\": \"mysql\", \n                \"version\"\
              : \"5.6\"\n            }, \n            \"deleted\": false, \n     \
              \       \"deleted_at\": null, \n            \"flavor\": {\n        \
              \        \"id\": \"3\", \n                \"links\": [\n           \
              \         {\n                        \"href\": \"https://ord.databases.api.rackspacecloud.com/v1.0/1234/flavors/3\"\
              , \n                        \"rel\": \"self\"\n                    },\
              \ \n                    {\n                        \"href\": \"https://ord.databases.api.rackspacecloud.com/flavors/3\"\
              , \n                        \"rel\": \"bookmark\"\n                \
              \    }\n                ]\n            }, \n            \"hostname\"\
              : \"e09ad9a3f73309469cf1f43d11e79549caf9acf2.rackspaceclouddb.com\"\
              , \n            \"id\": \"d4603f69-ec7e-4e9b-803f-600b9205576f\", \n\
              \            \"links\": [\n                {\n                    \"\
              href\": \"https://ord.databases.api.rackspacecloud.com/v1.0/1234/instances/d4603f69-ec7e-4e9b-803f-600b9205576f\"\
              , \n                    \"rel\": \"self\"\n                }, \n   \
              \             {\n                    \"href\": \"https://ord.databases.api.rackspacecloud.com/instances/d4603f69-ec7e-4e9b-803f-600b9205576f\"\
              , \n                    \"rel\": \"bookmark\"\n                }\n \
              \           ], \n            \"name\": \"json_rack_instance\", \n  \
              \          \"server\": {\n                \"deleted\": false, \n   \
              \             \"deleted_at\": null, \n                \"host\": \"hostname_1\"\
              , \n                \"id\": \"0a0bb560-362f-407a-90b6-3437f8b6e34f\"\
              , \n                \"local_id\": 0, \n                \"name\": \"\
              d4603f69-ec7e-4e9b-803f-600b9205576f-lay\", \n                \"status\"\
              : \"ACTIVE\", \n                \"tenant_id\": \"3000\"\n          \
              \  }, \n            \"service_status\": \"ACTIVE\", \n            \"\
              status\": \"ACTIVE\", \n            \"task_description\": \"No tasks\
              \ for the instance.\", \n            \"tenant_id\": \"3000\", \n   \
              \         \"updated\": \"2014-02-13T21:47:18\", \n            \"volume\"\
              : {\n                \"size\": 4\n            }\n        }, \n     \
              \   {\n            \"created\": \"2014-02-13T21:47:13\", \n        \
              \    \"datastore\": {\n                \"type\": \"mysql\", \n     \
              \           \"version\": \"5.6\"\n            }, \n            \"deleted\"\
              : false, \n            \"deleted_at\": null, \n            \"flavor\"\
              : {\n                \"id\": \"3\", \n                \"links\": [\n\
              \                    {\n                        \"href\": \"https://ord.databases.api.rackspacecloud.com/v1.0/1234/flavors/3\"\
              , \n                        \"rel\": \"self\"\n                    },\
              \ \n                    {\n                        \"href\": \"https://ord.databases.api.rackspacecloud.com/flavors/3\"\
              , \n                        \"rel\": \"bookmark\"\n                \
              \    }\n                ]\n            }, \n            \"hostname\"\
              : \"e09ad9a3f73309469cf1f43d11e79549caf9acf2.rackspaceclouddb.com\"\
              , \n            \"id\": \"dcf2c32b-241d-4c39-af70-1001dfe946d6\", \n\
              \            \"links\": [\n                {\n                    \"\
              href\": \"https://ord.databases.api.rackspacecloud.com/v1.0/1234/instances/dcf2c32b-241d-4c39-af70-1001dfe946d6\"\
              , \n                    \"rel\": \"self\"\n                }, \n   \
              \             {\n                    \"href\": \"https://ord.databases.api.rackspacecloud.com/instances/dcf2c32b-241d-4c39-af70-1001dfe946d6\"\
              , \n                    \"rel\": \"bookmark\"\n                }\n \
              \           ], \n            \"name\": \"xml_rack_instance\", \n   \
              \         \"server\": {\n                \"deleted\": false, \n    \
              \            \"deleted_at\": null, \n                \"host\": \"hostname_1\"\
              , \n                \"id\": \"dc0f43fd-f76f-4e4b-b676-4bf82539ecb9\"\
              , \n                \"local_id\": 0, \n                \"name\": \"\
              dcf2c32b-241d-4c39-af70-1001dfe946d6-lay\", \n                \"status\"\
              : \"ACTIVE\", \n                \"tenant_id\": \"3000\"\n          \
              \  }, \n            \"service_status\": \"ACTIVE\", \n            \"\
              status\": \"ACTIVE\", \n            \"task_description\": \"No tasks\
              \ for the instance.\", \n            \"tenant_id\": \"3000\", \n   \
              \         \"updated\": \"2014-02-13T21:47:18\", \n            \"volume\"\
              : {\n                \"size\": 4\n            }\n        }\n    ]\n\
              }\n"
  /mgmt/instances/{instanceId}:
    get:
      operationId: showinstances
      summary: List Database Instance Status and Details
      description: "\n        Returns detailed information for the specified Database\
        \ Instance.\n      "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: "{\n    \"instance\": {\n        \"created\": \"2014-02-13T21:47:13\"\
              , \n        \"datastore\": {\n            \"type\": \"mysql\", \n  \
              \          \"version\": \"5.6\"\n        }, \n        \"deleted\": false,\
              \ \n        \"deleted_at\": null, \n        \"flavor\": {\n        \
              \    \"id\": \"3\", \n            \"links\": [\n                {\n\
              \                    \"href\": \"https://ord.databases.api.rackspacecloud.com/v1.0/1234/flavors/3\"\
              , \n                    \"rel\": \"self\"\n                }, \n   \
              \             {\n                    \"href\": \"https://ord.databases.api.rackspacecloud.com/flavors/3\"\
              , \n                    \"rel\": \"bookmark\"\n                }\n \
              \           ]\n        }, \n        \"guest_status\": {\n          \
              \  \"state_description\": \"running\"\n        }, \n        \"hostname\"\
              : \"e09ad9a3f73309469cf1f43d11e79549caf9acf2.rackspaceclouddb.com\"\
              , \n        \"id\": \"d4603f69-ec7e-4e9b-803f-600b9205576f\", \n   \
              \     \"links\": [\n            {\n                \"href\": \"https://ord.databases.api.rackspacecloud.com/v1.0/1234/instances/d4603f69-ec7e-4e9b-803f-600b9205576f\"\
              , \n                \"rel\": \"self\"\n            }, \n           \
              \ {\n                \"href\": \"https://ord.databases.api.rackspacecloud.com/instances/d4603f69-ec7e-4e9b-803f-600b9205576f\"\
              , \n                \"rel\": \"bookmark\"\n            }\n        ],\
              \ \n        \"name\": \"json_rack_instance\", \n        \"root_enabled\"\
              : \"2014-02-13T21:47:14\", \n        \"root_enabled_by\": \"3000\",\
              \ \n        \"server\": {\n            \"addresses\": {\n          \
              \      \"private\": [\n                    {\n                     \
              \   \"addr\": \"123.123.123.123\"\n                    }\n         \
              \       ]\n            }, \n            \"deleted\": false, \n     \
              \       \"deleted_at\": null, \n            \"host\": \"hostname_1\"\
              , \n            \"id\": \"0a0bb560-362f-407a-90b6-3437f8b6e34f\", \n\
              \            \"local_id\": 0, \n            \"name\": \"d4603f69-ec7e-4e9b-803f-600b9205576f-lay\"\
              , \n            \"status\": \"ACTIVE\", \n            \"tenant_id\"\
              : \"3000\"\n        }, \n        \"service_status\": \"ACTIVE\", \n\
              \        \"status\": \"ACTIVE\", \n        \"task_description\": \"\
              No tasks for the instance.\", \n        \"tenant_id\": \"3000\", \n\
              \        \"updated\": \"2014-02-13T21:47:18\", \n        \"volume\"\
              : {\n            \"attachments\": [\n                {\n           \
              \         \"device\": \"vdb\", \n                    \"server_id\":\
              \ \"0a0bb560-362f-407a-90b6-3437f8b6e34f\"\n                }\n    \
              \        ], \n            \"availability_zone\": \"fake-availability-zone\"\
              , \n            \"created_at\": \"2001-01-01-12:30:30\", \n        \
              \    \"id\": \"VOL_221ca9a9-5620-4664-9446-0fe21b2a3c63\", \n      \
              \      \"size\": 4, \n            \"status\": \"in-use\", \n       \
              \     \"total\": 4.0, \n            \"used\": 0.16\n        }\n    }\n\
              }\n"
  /mgmt/instances/{instanceId}/root:
    get:
      operationId: getrootdetails
      summary: Get Root Details
      description: "\n        Gets the root flag details for the specified instance.\n\
        \      "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: "{\n    \"root_history\": {\n        \"enabled\": \"\
              2014-02-13T21:47:14\", \n        \"id\": \"d4603f69-ec7e-4e9b-803f-600b9205576f\"\
              , \n        \"user\": \"3000\"\n    }\n}\n"
  /mgmt/instances/{instanceId}/diagnostics:
    get:
      operationId: getdiagnosticdetails
      summary: Get Diagnostics Info
      description: "\n              Gets the instance agent and other instance diagnostics\
        \ info.\n          "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: "{\n    \"diagnostics\": {\n        \"fdSize\": 64,\
              \ \n        \"threads\": 2, \n        \"version\": \"1\", \n       \
              \ \"vmHwm\": 2872, \n        \"vmPeak\": 29160, \n        \"vmRss\"\
              : 2872, \n        \"vmSize\": 29096\n    }\n}\n"
  /mgmt/instances/{instanceId}/action:
    post:
      operationId: migrateInstance
      summary: Migrate Instance
      description: Migrates the instance to a different host.
      produces:
      - application/json
      responses:
        202:
          description: |-
            202 response
          examples:
            application/json: "HTTP/1.1 202 Accepted\nContent-Type: text/plain; charset=UTF-8\n\
              Content-Length: 58\nDate: Tue, 07 Feb 2012 23:56:52 GMT\n\n   \n"
  /mgmt/instances/{instanceId}/hwinfo:
    get:
      operationId: getHwInfo
      summary: Get Hardware Info
      description: "\n              Gets the instance hardware info from the guest\
        \ agent.\n          "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: "{\n    \"hwinfo\": {\n        \"mem_total\": 524288,\
              \ \n        \"num_cpus\": 1\n    }\n}\n\n\n"
  /mgmt/instances/{instanceId}/monitoring:
    get:
      operationId: getMonitoringStatus
      summary: Get Monitoring Status
      description: "\n        Retrieves the status of the Monitoring Agent on the\
        \ specified instance.\n      "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: "{\n    \"monitoring\": {\n        \"instance_id\":\
              \ \"041be99f-ae26-4784-9318-aaf236591066\", \n        \"status\": \"\
              ACTIVE\", \n        \"tenant_id\": \"1234\", \n        \"version\":\
              \ \"v1.0-fake\"\n    }\n}\n"
  /mgmt/instances/{instanceId}/monitoring/action:
    post:
      operationId: agentStop
      summary: Stop Monitoring Agent
      description: Stops the Monitoring Agent on the specified instance.
      produces:
      - application/json
      responses:
        202:
          description: |-
            202 response
          examples:
            application/json: |
              HTTP/1.1 202 Accepted
              Content-Type: application/json
              Via: 1.1 Repose (Repose/2.6.7)
              Content-Length: 0
              Date: Mon, 22 Jul 2013 18:46:25 GMT
              Server: Jetty(8.0.y.z-SNAPSHOT)
  /mgmt/storage:
    get:
      operationId: indexstorage
      summary: List Storage Device Details
      description: "\n        Returns detailed information for the storage device.\n\
        \      "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: "{\n    \"devices\": [\n        {\n            \"capacity\"\
              : {\n                \"available\": 90, \n                \"total\"\
              : 100\n            }, \n            \"name\": \"fake_storage\", \n \
              \           \"provision\": {\n                \"available\": 40, \n\
              \                \"percent\": 10, \n                \"total\": 50\n\
              \            }, \n            \"type\": \"test_type\", \n          \
              \  \"used\": 10\n        }\n    ]\n}\n"
  /mgmt/accounts:
    get:
      operationId: getaccounts
      summary: List All Active Accounts
      description: "\n        Lists all of the accounts owning at least one instance\
        \ that is not deleted.\n      "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: "{\n    \"accounts\": [\n        {\n            \"id\"\
              : \"3000\", \n            \"num_instances\": 2\n        }\n    ]\n}\n"
  /mgmt/accounts/{accountId}:
    get:
      operationId: getaccountbyid
      summary: List Account Details
      description: "\n        Returns detailed information for the specified account.\n\
        \      "
      produces:
      - application/json
      responses:
        200:
          description: |-
            200 response
          examples:
            application/json: "{\n    \"account\": {\n        \"id\": \"3000\", \n\
              \        \"instances\": [\n            {\n                \"host\":\
              \ \"hostname_1\", \n                \"id\": \"d4603f69-ec7e-4e9b-803f-600b9205576f\"\
              , \n                \"name\": \"json_rack_instance\", \n           \
              \     \"status\": \"ACTIVE\"\n            }, \n            {\n     \
              \           \"host\": \"hostname_1\", \n                \"id\": \"dcf2c32b-241d-4c39-af70-1001dfe946d6\"\
              , \n                \"name\": \"xml_rack_instance\", \n            \
              \    \"status\": \"ACTIVE\"\n            }\n        ]\n    }\n}\n"
host: '{data_center}.databases.api.rackspacecloud.com'
schemes:
- http
- https
